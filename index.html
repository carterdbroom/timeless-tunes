<!DOCTYPE HTML>
<html>
<head>
	<style>
        @import url('https://fonts.googleapis.com/css2?family=Gentium+Basic&family=Raleway:ital,wght@0,300;0,700;1,300&display=swap');  
    </style>
	<meta charset="UTF-8">
	<title>Timeless Tunes</title>
	<link rel="icon" href="favicon.ico?v=1" />
	<script type="text/javascript" src="main.js"></script>
</head>
<body>
	<div id="elm"></div>
	
	<script>
	//{ elmjs }
		var app = Elm.Main.init({
			node: document.getElementById('elm')
		});
	
		let sounds = {};
	
		app.ports.play.subscribe(function (sound) {
			const id = sound["id"];
			if (id in sounds) {
				var sound = sounds[sound["id"]];
				sound.currentTime = 0;
				sound.play();
			/*
				if (sound.ended){
					sound.currentTime = 0;
					sound.play();
				} else if (sound.paused) {
					sound.currentTime = 0;
					sound.play();
				}
			*/
			} else {
				var newSound = new Audio(sound["url"]);
				sounds[id] = newSound;
				newSound.currentTime = 0;
				newSound.play();
			}
		});
	</script>
	</body>
	</html>